---
import { getCMSPropsWithDefaults } from "@/lib/cms-component-utils";
import { getGlobalsFromContext } from "@/lib/cms-context";
import type { HeroSchemaData } from './hero.schema.d';
import type { GlobalsSchemaData } from "@/config/globals/globals.schema.d";
import ShaderHeroReact from "./ShaderHero";

export interface Props extends HeroSchemaData {}

// Automatically get CMS props based on component file path, merge with manual props
const cmsProps = getCMSPropsWithDefaults<HeroSchemaData>(
    import.meta.url,
    Astro.props,
);

// Access typed global variables
const globals = getGlobalsFromContext<GlobalsSchemaData>();
const siteName = globals?.siteName;

const {
    title = "Welcome to Capsulo",
    subtitle = "A content management system for developers",
    ctaButton = "Get Started",
    ctaInternalLink = "/",
    cards = [],
} = cmsProps;
---

<section id="hero">
    <ShaderHeroReact 
        client:load
        badge="AI-Powered Platform"
        title={title}
        subtitle={subtitle}
        description="Join thousands of developers building with the only CMS that understands the nuance of your content. Clean, precise, and uniquely yours."
        ctaText={ctaButton}
        ctaHref={ctaInternalLink}
    />
</section>
