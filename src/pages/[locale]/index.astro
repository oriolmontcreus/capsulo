---
import Hero from "@/components/capsulo/hero/Hero.astro";
import Layout from "@/layouts/cms.astro";
import { getGlobalsFromContext } from "@/lib/cms-context";
import { getLocaleStaticPaths } from "@/lib/get-static-paths";

// Auto-generate static paths for all locales
export const getStaticPaths = getLocaleStaticPaths;

// CMS data is auto-loaded by the layout
// Components automatically get their props based on their file path
const globals = getGlobalsFromContext();
---

<Layout>
    <Hero />

    <!-- Global Variables Demo Section -->
    <section class="py-16 px-4 bg-gradient-to-b from-background to-muted/20">
        <div class="container mx-auto max-w-4xl">
            <h2 class="text-3xl font-bold mb-8 text-center">
                Global Variables Demo
            </h2>

            <div class="grid gap-8 md:grid-cols-2">
                <!-- Site Settings -->
                <div class="bg-card p-6 rounded-lg border shadow-sm">
                    <h3
                        class="text-xl font-semibold mb-4 flex items-center gap-2"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            ><circle cx="12" cy="12" r="10"></circle><path
                                d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"
                            ></path><path d="M2 12h20"></path></svg
                        >
                        Site Settings
                    </h3>
                    <dl class="space-y-3">
                        <div>
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                Site Name
                            </dt>
                            <dd class="text-base mt-1">
                                {globals?.siteName || "Not set"}
                            </dd>
                        </div>
                        <div>
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                Contact Email
                            </dt>
                            <dd class="text-base mt-1">
                                {globals?.siteEmail || "Not set"}
                            </dd>
                        </div>
                        <div>
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                Description
                            </dt>
                            <dd class="text-base mt-1">
                                {globals?.siteDescription || "Not set"}
                            </dd>
                        </div>
                    </dl>
                </div>

                <!-- Social Media -->
                <div class="bg-card p-6 rounded-lg border shadow-sm">
                    <h3
                        class="text-xl font-semibold mb-4 flex items-center gap-2"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            ><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"
                            ></path><polyline points="16 6 12 2 8 6"
                            ></polyline><line x1="12" x2="12" y1="2" y2="15"
                            ></line></svg
                        >
                        Social Media
                    </h3>
                    <div class="space-y-2">
                        {
                            globals?.facebookUrl && (
                                <a
                                    href={globals.facebookUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="block text-sm hover:text-primary transition-colors"
                                >
                                    → Facebook
                                </a>
                            )
                        }
                        {
                            globals?.twitterUrl && (
                                <a
                                    href={globals.twitterUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="block text-sm hover:text-primary transition-colors"
                                >
                                    → Twitter/X
                                </a>
                            )
                        }
                        {
                            globals?.instagramUrl && (
                                <a
                                    href={globals.instagramUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="block text-sm hover:text-primary transition-colors"
                                >
                                    → Instagram
                                </a>
                            )
                        }
                        {
                            globals?.linkedinUrl && (
                                <a
                                    href={globals.linkedinUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="block text-sm hover:text-primary transition-colors"
                                >
                                    → LinkedIn
                                </a>
                            )
                        }
                        {
                            globals?.youtubeUrl && (
                                <a
                                    href={globals.youtubeUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="block text-sm hover:text-primary transition-colors"
                                >
                                    → YouTube
                                </a>
                            )
                        }
                        {
                            !globals?.facebookUrl &&
                                !globals?.twitterUrl &&
                                !globals?.instagramUrl &&
                                !globals?.linkedinUrl &&
                                !globals?.youtubeUrl && (
                                    <p class="text-sm text-muted-foreground">
                                        No social media links configured
                                    </p>
                                )
                        }
                    </div>
                </div>

                <!-- Contact Information -->
                <div
                    class="bg-card p-6 rounded-lg border shadow-sm md:col-span-2"
                >
                    <h3
                        class="text-xl font-semibold mb-4 flex items-center gap-2"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            ><path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                            ></path></svg
                        >
                        Contact Information
                    </h3>
                    <dl class="grid gap-4 md:grid-cols-3">
                        <div>
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                Phone
                            </dt>
                            <dd class="text-base mt-1">
                                {globals?.phone || "Not set"}
                            </dd>
                        </div>
                        <div>
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                Email
                            </dt>
                            <dd class="text-base mt-1">
                                {globals?.email || "Not set"}
                            </dd>
                        </div>
                        <div>
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                City
                            </dt>
                            <dd class="text-base mt-1">
                                {globals?.city || "Not set"}
                            </dd>
                        </div>
                        <div class="md:col-span-2">
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                Address
                            </dt>
                            <dd class="text-base mt-1 whitespace-pre-line">
                                {globals?.address || "Not set"}
                            </dd>
                        </div>
                        <div>
                            <dt
                                class="text-sm font-medium text-muted-foreground"
                            >
                                Country
                            </dt>
                            <dd class="text-base mt-1">
                                {globals?.country || "Not set"}
                            </dd>
                        </div>
                    </dl>
                </div>
            </div>

            <!-- Debug Info -->
            <details class="mt-8 p-4 bg-muted/50 rounded-lg">
                <summary class="cursor-pointer font-medium text-sm"
                    >View Raw Global Variables Data</summary
                >
                <pre
                    class="mt-4 p-4 bg-background rounded border overflow-x-auto text-xs"><code>{JSON.stringify(globals, null, 2)}</code></pre>
            </details>
        </div>
    </section>
</Layout>
